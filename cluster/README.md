## cluster(集群)

Nodejs运行在单线程中。用户可以使用cluster模块来利用多核cpu的优势。

工作进程是通过child_process.fork()方法创建的，所以它们和父进程之间建立了一个IPC通道。

cluster支持两种连接的方式：

第一种是循环法。由主进程负责监听端口，接收新的连接后，再将连接循环分发给工作进程，在循环的过程中做了一些处理，防止出现工作进程任务过载的现象。

第二种是主进程监听socket后发给感兴趣的工作进程，由工作进程负责直接接收连接。

各个工作进程是独立的进程，他们可以根据需要随时关闭或者重新生成，而不会影响其他进程的正常进行。只要有存活的工作进程，服务器就会处理连接。如果没有存活的工作进程，现有的连接会丢失，新的连接也将会被拒绝。Node不会自动管理工作进程的数量，而应该由具体的应用根据实际需要来管理进程池。